<div class="container-fluid mt-3">

    <div class="d-flex justify-content-between mb-3">
        <h6 class="fw-bold">Stav skladu celych tabul</h6>

    </div>
    <div class="card-body">
        <table id="stockStatusTable" class="table table-sm">
            <thead class="sticky-top">
            <tr>
                <th scope="col">Material</th>
                <th scope="col">Paleta</th>
                <th scope="col">Ks na palete</th>
                <th scope="col">Poznamka</th>
                <th scope="col">Nalozil</th>
                <th scope="col">Nalozene</th>
                <th scope="col"></th>

            </tr>
            </thead>
            <tbody>
            {% for sheet in sheets %}
                {% for palette_sheet in sheet.palettesheet_set.all %}
                    <tr class="">
                        <td>{{ sheet.material.material_name }}, {{ sheet.surface.surface_name }}, {{ sheet.thickness }}x{{ sheet.size_x }}x{{ sheet.size_y }}</td>
                        <td>{{ palette_sheet.palette.name }}</td>
                        <td>{{ palette_sheet.quantity }} ks</td>
                        <td>
                            {% if palette_sheet.note != None %}
                                {{ palette_sheet.note }}
                            {% endif %}
                        </td>
                        <td>{{ palette_sheet.created_by.first_name }} {{ palette_sheet.created_by.last_name }}</td>
                        <td>{{ palette_sheet.created_date }}</td>
                        <td class="m-0 p-0">
                            <div class="d-flex justify-content-end">
                                <button class="btn btn-sm btn-info m-0 mt-1 me-1" type="button"
                                        hx-get="{% url 'palette_edit' palette_sheet.pk %}"
                                        hx-trigger="click"
                                        hx-target="#modalsFrame"
                                        hx-swap="this"
                                ><i class="fa-sharp fa-solid fa-pen-to-square"></i>
                                </button>
                                <button class="btn btn-sm btn-danger mt-1 m-0" type="button"
                                        hx-post="{% url 'sheet_delete' palette_sheet.pk %}"
                                        hx-trigger="click"
                                        hx-confirm="Naozaj chces zmazat plech {{ palette_sheet }}"
                                        hx-on="htmx:afterRequest: removeParentElement()"
                                        hx-target="#formFrame"
                                ><i class="fa-sharp fa-solid fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            {% empty %}
                <tr>
                    <td>{{ sheet.material }}, {{ sheet.surface }}, {{ sheet.tickness }}x{{ sheet.size_x }}x{{ sheet.size_y }}</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/a</td>

                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <script>
        new DataTable('#stockStatusTable', {
            info: true,
            ordering: true,
            paging: true,
            stateSave: true
        });
    </script>
</div>
